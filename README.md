# Αλγόριθμος ανωνυμοποίησης ΑΜΚΑ

Για να τρέξετε το script θα πρέπει να έχετε εγκαταστήσει python 3.6 ή νεώτερη και να έχετε εγκαταστήσει και τα πακέτα pandas, pysha3, python-secrets.

Η εγκατάσταση στο καθένα από αυτά μπορεί να γίνει με τις εντολές:
> pip install pandas
> pip install pysha3
> pip install python-secrets

Στη συνέχεια αρκεί να έχετε το script και ένα csv αρχείο με τα ραντεβού όπως το αρχείο 
File_to_anonymize.csv που υπάρχει στο φάκελο μαζί με το script.

Η εντολή για να τρέξει το script είναι

> python anonymizer.py -i file_to_anonymize.csv -o anonymized.csv -d dicts.json -c PatID,DocID

Στο πιο πάνω παράδειγμα, από το input csv αρχείο (file_to_anonymize.csv) ανωνυμοποιούνται μόνο οι στήλες με όνομα PatID και DocID (δίνονται με κόμμα στην 4η επιλογή -c), οι υπόλοιπες παραμένουν ως έχουν (ουσιαστικά αγνοούνται).

To script διαβάζει το αρχείο και εντοπίζει αρχικά όλα τα ΑΜΚΑ ασθενών και γιατρών και τα κάνει hash. Παράλληλα γράφει στο dicts.json ως λεξικά τις αντιστοιχήσεις του AMKA με το hashed AMKA (για γιατρούς και ασθενείς αντίστοιχα), αλλά και τα ανάποδα λεξικα (hashed AMKA→ AMKA). Αυτά μπορείτε να τα κρατήσετε για να αξιοποιήσετε κάποια στιγμή γνώση που μπορεί να έχει προκύψει για τα ανώνυμα ΑΜΚΑ. Στο ίδιο αρχείο γράφει το secret key που χρησιμοποιείται για την κωδικοποίηση.

Τέλος γράφει το ανωνυμοποιημένο αρχείο σε csv (με την επιλογή -ο anonymized.csv). Αυτό είναι το αρχείο που μας αποστέλετε.

Η ίδια διαδικασία μπορεί να γίνει και σε άλλα αρχεία που περιέχουν δεδομένα για το ΑΜΚΑ του ιατρού ή του ασθενή (π.χ. ειδικότητες, δημογραφικά, κλπ) ανωνυμοποιώντας αυτή τη φορά μόνο τη στήλη PatID ή τη στήλη DocID.
Για παράδειγμα έστω ένα doctor_data.csv που περιέχει το AMKA του γιατρού (σε στήλη με το όνομα DocAMKA) και ορισμένες επιπλέον στήλες που δεν θέλουν ανωνυμοποίηση. Η εντολή 

> python anonymizer.py -i doctor_data.csv -o anonymized_doctor_data.csv -d doctor_dicts.json -c DocAMKA

Δημιουργεί το ανωνυνοποιημένο (ως προς τη στήλη DocAMKA) αρχείο anonymized_doctor_data.csv που μας αποστέλετε.

Αν θέλετε να ανωνυμοποιήσετε οποιαδήποτε άλλη στήλη (π.χ. Firstname ή Lastname) μπορείτε να το κάνετε αυξάνοντας τη λίστα στην επιλογή -c
> python anonymizer.py -i doctor_data.csv -o anonymized_doctor_data.csv -d doctor_dicts.json -c DocAMKA, Firstname, Lastname

Προσοχή το pandas είναι case sensitive οπότε πρέπει να δίνετε με σωστό case τα ονόματα στηλών.

